<div class="session-selection-container">
  <div
    class="header-row"
    [ngClass]="{
      'right-sidebar-expanded':
        rightSidebarState() === RightSidebarState.Expanded,
      'right-sidebar-collapsed':
        rightSidebarState() === RightSidebarState.Collapsed,
    }">
    <div class="step-number-wrapper">
      <div class="step-number">1</div>
    </div>

    <app-syn-single-select
      [options]="availableSessions()"
      [selectedOption]="activeSession()"
      [uiConfig]="{
        placeholder: 'Select Session',
        isTriggerIconEnabled: true,
        searchFilerType: 'default',
        matMenuClass: 'session-selection-menu',
      }"
      (dropdownOpened)="onDropdownOpen()"
      (optionSelected)="onOptionSelect($event)" />
  </div>
  <div class="content">
    <!-- #region commented due to the experience change -->
    <!-- <ng-container
      *ngTemplateOutlet="
        sessionInfo;
        context: {
          $implicit: {
            title: 'Session Title',
            key:
              rightSidebarState() === RightSidebarState.Expanded
                ? 'session_title_expanded'
                : 'session_title',
          },
        }
      " />
    <ng-container
      *ngTemplateOutlet="
        sessionInfo;
        context: {
          $implicit: {
            title: 'Session Insights',
            key:
              rightSidebarState() === RightSidebarState.Expanded
                ? 'session_insights_expanded'
                : 'session_insights',
          },
        }
      " /> -->
    <!-- #endregion -->

    <div class="content-steps-container">
      <div class="content-step">
        <div class="step-number-wrapper">
          <div class="step-number">2</div>
        </div>
        <div class="step-details">
          <div class="step-label">
            Do you want to project the session on a physical screen?
          </div>
          <mat-slide-toggle
            [checked]="isProjectOnPhysicalScreen()"
            [disabled]="activeSession() === null"
            (change)="
              isProjectOnPhysicalScreen.set(!isProjectOnPhysicalScreen())
            " />

          @if (isProjectOnPhysicalScreen()) {
            <a
              class="open-link"
              [attr.data-id]="getSessionUrl"
              [href]="getSessionUrl"
              (click)="openSessionInNewWindow()"
              data-type="URL"
              rel="noopener noreferrer"
              target="_blank">
              Open Screen to Project
            </a>

            <button
              mat-icon-button
              matTooltip="Click to copy URL"
              class="copy-icon-button"
              (click)="copyToClipboard()">
              <mat-icon>content_copy</mat-icon>
            </button>
          }
        </div>
      </div>

      <div class="content-step">
        <div class="step-number-wrapper">
          <div class="step-number">3</div>
        </div>
        <div class="step-details">
          <button
            class="btn-primary-default btn-start-listening"
            [disabled]="activeSession() === null"
            (click)="onStartListening()">
            <mat-icon>settings_voice</mat-icon>
            <p>Start Listening</p>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #sessionInfo let-data>
  @if (activeSession() === null) {
    <div
      class="sample-skeleton"
      [ngClass]="{
        'right-sidebar-expanded':
          rightSidebarState() === RightSidebarState.Expanded,
        'right-sidebar-collapsed':
          rightSidebarState() === RightSidebarState.Collapsed,
      }"></div>
  } @else {
    <app-projection-image
      [key]="data.key"
      [label]="data.title"
      (projectedToScreen)="onProjectToScreen($event)"
      filterType="none"
      imgUrl="assets/projections/{{ data.key }}.svg"></app-projection-image>
  }
</ng-template>
